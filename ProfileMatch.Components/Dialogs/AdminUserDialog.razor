@if (EditedUser == null || Departments == null)
{
    <p>@L["loading"]</p>
}
else
{

    <MudDialog>
        <DialogContent>
            <MudForm @ref="Form">
                <MudAvatar Image="@EditedUser?.PhotoPath">
                    </MudAvatar>
                <InputFile OnChange="@OnChange" @ref="inputFile" accept=".jpg, .jpeg, .png" />
                <MudSelect @bind-Value="@EditedUser.DepartmentId"
                           T="int"
                           OffsetY="true"
                           CloseIcon="@Icons.Material.Filled.LocationCity"
                           HelperText=@L["Select Department"]
                           AdornmentColor="Color.Tertiary">
                    @foreach (var dept in Departments)
                    {
                        <MudSelectItem Value="@(dept.Id)">@dept.Name</MudSelectItem>
                    }
                </MudSelect>

                <MudSwitch @bind-Checked="@EditedUser.IsActive"
                           T="bool"
                           Label=@L["Is Active?"]
                           Color="Color.Success" />
                <MudTextField T="string" @bind-Value="@EditedUser.FirstName" Immediate="true" Label=@L["First Name"]
                              Required="true" RequiredError=@L["Person name is required!"] />
                <MudTextField T="string" @bind-Value="@EditedUser.LastName" Immediate="true" Label=@L["Last Name"] Required="true" RequiredError=@L["Person name is required!"] />
                <MudTextField T="string" Label="Email" @bind-Value="@EditedUser.Email" Required="true" RequiredError=@L["Email is required!"] />

                    <MudTextField Label="Password" Variant="Variant.Text" InputType="@PasswordInput" Adornment="Adornment.End" AdornmentIcon="@PasswordInputIcon" OnAdornmentClick="ButtonTestclick" @bind-Value="@EditedUserPassword" Required="true" RequiredError=@L["Password is required!"] />
                
                <MudSelect Required="true" T="Gender?" Label=@L["Select Gender"] @bind-Value="@EditedUser.Gender"
                           OffsetY="true" RequiredError=@L["Gender is required!"]
                           CloseIcon="@Icons.Material.Filled.LocationCity"
                           HelperText=@L["Select Gender"]
                           AdornmentColor="Color.Tertiary">
                    @foreach (Gender? g in Enum.GetValues(typeof(Gender)))
                    {
                        <MudSelectItem Value="@g">@g</MudSelectItem>
                    }
                </MudSelect>
                <MudDatePicker @bind-Date="@_dob"
                               Required="true"
                               Rounded="true"
                               Elevation="1"
                               RequiredError=@L["BirthDate is Required"]
                               Label=@L["Select Date of Birth"]
                               Editable="false" />
                               <MudTable Items="@UserRoles">
                                    <HeaderContent>
                                   <MudTh>Role Name</MudTh>
                                   <MudTh>Assigned</MudTh>
                                   </HeaderContent>
                                   <RowTemplate>
                                         <MudTd DataLabel="Role Name">@context.RoleName</MudTd>
                                         <MudTd DataLabel="Assigned">
                                             <MudCheckBox @bind-Checked="@context.IsSelected"/></MudTd>
                                   </RowTemplate>
                               </MudTable>
            </MudForm>
            <MudButton OnClick="@HandleSave">@L["Save"]</MudButton>
        </DialogContent>
    </MudDialog>
}
@code{
    private InputFile inputFile;
}